<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>Getting Started</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Hype</span> <span class="project-version">0.0.21</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Topics</span></h3><ul><li class="depth-1  current"><a href="getting-started.html"><div class="inner"><span>Getting Started</span></div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1 "><a href="hype.core.html"><div class="inner"><span>hype.core</span></div></a></li></ul></div><div class="document" id="content"><div class="doc"><div class="markdown"><h1><a href="#getting-started" name="getting-started"></a>Getting Started</h1>
<p><code>hype</code> provides a number of functions to assist in using hypermedia in APIs. Primarily, <code>hype</code> uses reverse routing to build URLs and paths. Currently, <code>hype</code> expects <code>ring</code> compatible requests and provides support for the <code>bidi</code> routing library but could be extended to support others in the future. </p>
<p><code>hype</code> can build absolute paths (i.e., paths that start from <code>/</code>) and absolute URLs (i.e., including scheme and host) and provides some facilities for converting between the two.</p>
<p><code>hype</code> can build URLs and paths including any or all of:</p>
<ul>
  <li>path parameters,</li>
  <li>query parameters,</li>
  <li><a href="https://tools.ietf.org/html/rfc6570">URI templates</a>.</li>
</ul>
<h2><a href="#requiring" name="requiring"></a><a name="requiring-hype"></a> Requiring <code>hype</code></h2>
<p><code>hype</code> can be required with:</p>
<pre><code class="clojure">(require '[hype.core :as hype])
</code></pre>
<h2><a href="#generating-paths" name="generating-paths"></a><a name="generating-paths"></a> Generating paths</h2>
<p>Given a set of <code>bidi</code> routes:</p>
<pre><code class="clojure">(def routes 
  [""
   [["/" :index]
    ["/articles" :articles]
    [["/articles/" :article-id] 
     [["" :article]
      [["/sections/" :article-section-id] :article-section]]]]])
</code></pre>
<p>an absolute path, say for <code>:articles</code>, can be generated as follows:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :articles)
; =&gt; "/articles"
</code></pre>
<p>If the route requires a path parameter, such as in the <code>:article</code> route above:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article
  {:path-params {:article-id 26}})
; =&gt; "/articles/26"
</code></pre>
<p>To leave the path parameter templated for use in URI templates:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article
  {:path-template-params {:article-id :article-id}})
; =&gt; "/articles/{articleId}"
</code></pre>
<p>Path template parameters are automatically converted to camel case. This behaviour can be overridden as follows:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article
  {:path-template-params {:article-id :articleID}
   :path-template-param-key-fn clojure.core/identity})
; =&gt; "/articles/{articleID}"
</code></pre>
<p>If the route requires multiple path parameters, such as in the <code>:article-section</code> route above:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article-section
  {:path-params {:article-id 26
                 :article-section-id 1}})
; =&gt; "/articles/26/sections/1
</code></pre>
<p>Query parameters are also supported when generating a path:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :articles
  {:query-params {:page 2
                  :per-page 10}})
; =&gt; "/articles?page=2&amp;perPage=10"
</code></pre>
<p>As for path template parameters, query parameter keys are automatically converted to camel case. This behaviour can be overridden as follows:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :articles
  {:query-params {:page 2
                  :per-page 10}
   :query-param-key-fn clojure.core/identity})
; =&gt; "/articles?page=2&amp;per-page=10"
</code></pre>
<p>Both path and query parameters can be provided together:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article
  {:path-params {:article-id 26}
   :query-params {:include-all-sections true}})
; =&gt; "/articles/26?includeAllSections=true"
</code></pre>
<p>When paths need to include query string template parameters:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :articles
  {:query-template-params [:page :per-page]})
; =&gt; "/articles{?page,perPage}"
</code></pre>
<p>Again, query template parameter keys are converted to camel case by default. This behaviour can be overridden as follows:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :articles
  {:query-template-params [:page :per-page]
   :query-template-param-key-fn clojure.core/identity})
; =&gt; "/articles{?page,per-page}"
</code></pre>
<p>Query string template parameters can be used in addition to path parameters and other query string parameters:</p>
<pre><code class="clojure">(hype/absolute-path-for routes :article
  {:path-params {:article-id 26}
   :query-params {:include-all-sections true}
   :query-template-params [:include-summary]})
; =&gt; "/articles/26?includeAllSections=true{&amp;includeSummary}"
</code></pre>
<p>Currently, there is no support for relative paths.</p>
<h2><a href="#generating-urls" name="generating-urls"></a><a name="generating-urls"></a> Generating URLs</h2>
<p>Given the set of routes defined in <a href="#generating-paths">Generating paths</a> and a <code>ring</code> <code>request</code> such as that produced by:</p>
<pre><code class="clojure">(require '[ring.mock.request :as ring-mock])

(def request (ring-mock/request "GET" "https://localhost:8080/help"))
</code></pre>
<p>an absolute URL, say for <code>:articles</code>, can be generated as:</p>
<pre><code class="clojure">(hype/absolute-url-for request routes :articles)
; =&gt; "https://localhost:8080/articles"
</code></pre>
<p>All parameters that can be passed to <a href="hype.core.html#var-absolute-path-for">absolute-path-for</a> can also be passed to <a href="hype.core.html#var-absolute-url-for">absolute-url-for</a>, for example:</p>
<pre><code class="clojure">(hype/absolute-url-for request routes :article
  {:path-params {:article-id 26}})
; =&gt; "https://localhost:8080/articles/26"

(hype/absolute-url-for request routes :article
  {:path-template-params {:article-id :articleID}
   :path-template-param-key-fn clojure.core/identity})
; =&gt; "https://localhost:8080/articles/{articleID}"

(hype/absolute-url-for request routes :articles
  {:query-template-params [:page :per-page]})
; =&gt; "https://localhost:8080/articles{?page,perPage}"

(hype/absolute-url-for request routes :article
  {:path-params {:article-id 26}
   :query-params {:include-all-sections true}
   :query-template-params [:include-summary]})
; =&gt; "https://localhost:8080/articles/26?includeAllSections=true{&amp;includeSummary}"
</code></pre>
<h2><a href="#converting-between-paths-and-urls" name="converting-between-paths-and-urls"></a><a name="converting-paths-and-urls"></a> Converting between paths and URLs</h2>
<p>Given the request defined in <a href="#generating-urls">Generating URLs</a> and an absolute path, such as:</p>
<pre><code class="clojure">(def absolute-path "/articles/26/sections/3")
</code></pre>
<p>an absolute URL relative to the request can be generated as:</p>
<pre><code class="clojure">(hype/absolute-path-&gt;absolute-url request absolute-path)
; =&gt; "https://localhost:8080/articles/26/sections/3"
</code></pre></div></div></div></body></html>